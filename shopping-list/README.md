TODOs:
- Move all actions that change the state to modify the State object, then redraw
- Do not parse the state from the UI before applying changes